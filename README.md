task-force-arma-3-radio
=======================

Arma 3 Team Speak Radio Plugin

###Установка

* Скачайте [архив с рацией 0.5.3 pre beta](https://github.com/michail-nikolaev/task-force-arma-3-radio/raw/master/releases/0.5.3%20pre%20beta.zip) и распакуйте его.
* Cкопируйте содержимое папки `TeamSpeak 3 Client` в корневую папку TeamSpeak.
* Скопируйте содержимое папки `Arma 3` в папку с игрой `...\SteamApps\common\Arma 3`.

> TF Radio использует последнюю версию СBA (Community Base Addons). Поэтому, если этот мод у вас уже установлен, Windows предложит заменить папку.


###Настройка

* Убедитесь, что в TeamSpeak клавиша `Caps Lock` не используется для разговора.
* Также в ARMA 3  отключите разговор по внутренней связи (VON) по нажатию `Caps Lock` (чтобы не двоиться).
* В TeamSpeak зайдите на любой сервер, кликните правой кнопкой на вашем канале и выберите `Setup 3D Sound`, установите галочку `Enable 3D Sound` слева снизу.
* Откройте список плагинов в Team Speak `Settings > Plugins`.
  1. Включите `Task Force Arma 3 Radio`.
  2. Отключите `ACRE` и `radio ts ARMA3.ru version`, если они есть, чтобы избежать конфликтов.
  3. На всякий случай внизу слева можно нажать кнопку Reload All для перезагрузки всех плагинов.
* Убедитесь, что громкость оповещений в Team Speak не отключена: `Options > Payback > Sound Pack Volume` установите в положительное значение.

> Рекомендуется отключить встроенные звуки оповещений TeamSpeak: `Options > Notifications > Sound Pack: "Sounds Deactivated"`. Для применения этой опции необходимо перезапустить TeamSpeak.

* Запустите игру с аддонами `@CBA_A3` и `@task_force_radio` (Community Base Addons: A3 Beta и Task Force Arrowhead Radio). Это можно сделать, прописав в ярлыке игры имена модов после EXE файла `…\arma3.exe -mod:@CBA_A3;@task_force_radio`.
* Убедитесь, что ник в профиле игры и TeamSpeak совпадает.
* Зайдите в тот же канал, где находятся другие игроки, играющие с данной рацией.

###Использование в игре

| Клавиши | Действие |
| --- | --- |
| Кнопка разговора в TeamSpeak | Прямая речь. |
| `Caps Lock` | Разговор по рации. |
| `CTRL` + `Caps Lock` | Разговор по рации дальней связи. |
| `CTRL` + `P` | Открыть интерфейс коротковолновой рации (рация должна быть в слоте инвентаря). Для того, чтобы ввести частоту, нажмите `CLR`, введите значение и нажмите `ENT`. |
| `ALT` + `P` | Открыть интерфейс рации дальней связи (рация дальней связи должна быть одета на спину, либо вы должны быть в технике за водителя, стрелка, командира или помощника пилота). Для того, чтобы ввести частоту нажмите `MENU CLR`, введите значение и нажмите `FREQ`. |
| `ESC` | Выход из интерфейса рации. |

> Вы можете переназначить клавиши управления в файле настроек, лежащем в папке с игрой `...\Arma 3\userconfig\task_force_radio\radio_keys.hpp`. Файл редактируется обычным блокнотом.

###Дополнительная информация

#####Рации
* Рация [AN/PRC-152](http://ru.wikipedia.org/wiki/AN/PRC-152) (коротковолновая) может работать на частотах от 30 до 512 MHz. Дальность действия - 3 км.
* Рация [RT-1523G (ASIP)](http://en.wikipedia.org/wiki/SINCGARS#Models) работает на частотах от 30 до 87 MHz. Данная рация одевается как рюкзак и доступна в технике водителю, командиру, стрелку и помощнику пилота. В начале миссии эта рация автоматически выдается лидерам групп (работает не в 100% случаев). Дальность действия - 20 км.
* Обе рации поддерживают SINCGARS протокол, поэтому могут связываться друг с другом. В случае если передача осуществляется с [AN/PRC-152](http://ru.wikipedia.org/wiki/AN/PRC-152), звук будет высокочастотным. В случае передачи с [RT-1523G (ASIP)](http://en.wikipedia.org/wiki/SINCGARS#Models) - низкочастотным. 


#####Режимы работы плагина
Плагин поддерживает два режима работы — **серьезный** и **упрощенный**. 
* **Упрощенный** — используется по умолчанию. Он предназначен главным образом для кооперативных игр. Его особенностью является то, что игроки с плагином и в игре слышат мертвых, не играющих, играющих на другом сервере и играющих без плагина игроков минуя рацию (просто как через TeamSpeak). Это делает менее удобным игры против людей, но позволяет вашему другу без проблем узнать, где вы играете, какая у вас частота и т.д. Разумется, те кто играет на одном сервере со включенными аддонами и плагинами будут слышать друг друга по "законам" рации с учетом расстояния и частот.
* **Серьезный** — предназначен для проведения игр, где игроки играют против других игроков. Для его активации в TeamSpeak необходимо создать канал с названием `TaskForceRadio` и паролем `123`. Игроки должны включить плагин рации, зайти на сервер и, разойдясь по каналам сторон, брифинговать. При старте миссии через несколько секунд игроки будут переброшены в канал `TaskForceRadio`. В данном случае игроки будут слышать только живых игроков со включенным плагином играющих на этом же сервере. Мертвые игроки, в свою очередь, могут общаться друг с другом. Если мертвый игрок респавниться - он снова будет слышать только живых. После того, как игра заканчивается, игроки перебрасываются в канал, в котором они брифинфовали до игры.

#####Решение проблем
* Если из-за ошибки или еще чего-то вы перестали слышать других игроков даже вне игры, откройте `Setup 3D Sound` в TeamSpeak и скликните `Center All`.
* Для устранения возможных ошибок с плагином разработчикам может потребоваться лог TeamSpeak, чтобы его скопировать выберите `Tools` -> `Client Log`, поставьте все галочки сверху и, выделив весь текст на `CTRL + A` Скопируйте его в буфер обмена
* Если TeamSpeak (тьфу-тьфу-тьфу) упал при использовании плагина - он показывает окошко с описанием того, где можно найти дамп (путь к файлу). Буду очень благодарен за этот файлик. 

#####Администраторам TeamSpeak серверов
Уменьшите уровень защиты от флуда: `Правый клик по серверу > Edit Virtual Server > More > Anti Flood` поставьте значения 30, 300, 3000 (сверху вниз).

#####Картоделам
Класс рации дальней связи - `tf_rt1523g`, добавить ее игроку в строке инициализации в редакторе можно следующим образом: `this addBackpack "tf_rt1523g";`

#####Разработчикам
Если данная разработка будет как-либо популярна, то хотелось бы избежать кучи несовместимых форков. По этой причине в случае желания внесения изменений связывайтесь со мной - велика вероятность, что ваши разработки будут вмержены в главную ветку. Ждем ваших Pull Requests :)

#####Спасибки
* Отряду [Task Force Arrowhead](http://forum.task-force.ru/) за тестирование, поддержку, терпение и всяческую помощь.
* [MTF](http://forum.task-force.ru/index.php?action=profile;u=7) ([varzin](https://github.com/varzin)) за помощь с графикой и документацией.
* [Блендеру](http://arma3.ru/forums/index.php/user/41-blender/) за шрифт.
* [vinniefalco](https://github.com/vinniefalco) за [DSP фильтры](https://github.com/vinniefalco/DSPFilters)
